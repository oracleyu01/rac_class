
▣ 예제8.  클러스터 서비스 3가지 (pI-26) 

 오라클 클러스터 소프트웨어 덕분에 아래의 혜택을 누릴 수 있는것인데

  1. 고가용성 (365일 24시간 DB 접속을 가능하게 해줍니다.)
  2. 확장성 ( 사용자가 많아지면 노드를 계속 추가해 나갈 수 있습니다.)

 서버를 증설하려면 ?  1년 넘는 프로젝트를 진행해야합니다. 
 
 그런데 처음부터 RAC 를 사용하게되면 노드만 새로 추가하면 됩니다.

 * 클러스터 서비스 3가지 ?

  1. css (cluster synchronization service)

   노드간의 심장박동(heart beat) 를 보내서 서로 살아있는지 확인하는 역활 

     노드1  ♥ ---------------------------------->  노드2 
                 <----------------------------------- ♥

  심장박동이 상대편쪽에서 오지 않으면 그 노드를 죽은 노드로 간주하고 rebooting
  시킵니다. 

  2. crs (cluster ready service)

    고가용성 작업을 보장하기 위한 서비스(failover 를 지원하는 서비스) 
 
    failover 란 ?  내가 접속한 노드가 다운되었을때 자동으로 다른 살아있는 노드로
                    접속할 수 있게 해주는 기능

  3. evm (event management) 

   클러스터에 관련한 어떤 문제가 발생하면 그 문제를 남기고 기록하는 서비스

■ 실습   failover 가 가능하도록 네트워크 설정하는 방법

$ cd $ORACLE_HOME/network/admin

$ vi tnsnames.ora

racdb_taf=
  (DESCRIPTION =
    (address_list=
     (load_balance=on)
     (failover=on)
    (ADDRESS = (PROTOCOL = TCP)(HOST = 10.0.2.111)(PORT = 1521))
    (ADDRESS = (PROTOCOL = TCP)(HOST = 10.0.2.112)(PORT = 1521)) )
    (CONNECT_DATA =
      (SERVICE_NAME = racdb)
      (failover_mode=(type=select)(method=basic) )
    )
  )

※ rac 에서 사용하는 ip 주소 4가지 ?

 1. public ip  ----> 외부에서 접속할 때 사용하는 ip 
 2. private  ip  ----> 노드들 끼리 통신할 때 사용하는 ip
 3. virtual ip  ---> 하나의 노드가 죽었을때 다른 노드로 failover 를 하기위해 필요한ip
 4. scan ip ---> scan listener 의 ip 주소

